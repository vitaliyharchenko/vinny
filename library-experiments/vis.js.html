<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <title>Граф математических тем с использованием Graphviz</title>
        <style>
            body {
                margin: 0;
                overflow: hidden;
            }
            #graph {
                width: 100vw;
                height: 100vh;
            }
            svg {
                width: 100%;
                height: 100%;
            }
        </style>
    </head>
    <body>
        <div id="graph"></div>

        <!-- Подключение viz.js -->
        <script src="https://cdn.jsdelivr.net/npm/viz.js@2.1.2/viz.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/viz.js@2.1.2/full.render.js"></script>

        <script>
            // Определение графа в формате DOT
            var dot = `
    digraph G {
      rankdir=LR; // Расположение слева направо
      node [shape=ellipse, style=filled, fontsize=10];

      // Определение цветов для групп (классов)
      subgraph cluster_1 { label="1 класс"; color=lightgrey; style=filled; 1; 2; 3; }
      subgraph cluster_2 { label="2 класс"; color=lightblue; style=filled; 4; 5; 6; 7; }
      subgraph cluster_3 { label="3 класс"; color=lightgreen; style=filled; 8; 9; 10; 11; }
      subgraph cluster_4 { label="4 класс"; color=yellow; style=filled; 12; 13; 14; }
      subgraph cluster_5 { label="5 класс"; color=orange; style=filled; 15; 16; 17; 18; }
      subgraph cluster_6 { label="6 класс"; color=lightpink; style=filled; 19; 20; 21; 22; }
      subgraph cluster_7 { label="7 класс"; color=lightcoral; style=filled; 23; 24; 25; 26; 27; }
      subgraph cluster_8 { label="8 класс"; color=khaki; style=filled; 28; 29; 30; 31; }
      subgraph cluster_9 { label="9 класс"; color=lavender; style=filled; 32; 33; 34; 35; }

      // Определение узлов с метками
      1 [label="Счет до 20"];
      2 [label="Сложение и вычитание\nв пределах 20"];
      3 [label="Простые геометрические фигуры"];
      4 [label="Счет до 100"];
      5 [label="Сложение и вычитание\nв пределах 100"];
      6 [label="Умножение и деление\nна числа 2-5 и 10"];
      7 [label="Единицы измерения длины"];
      8 [label="Таблица умножения"];
      9 [label="Деление с остатком"];
      10 [label="Дроби как части целого"];
      11 [label="Периметр геометрических фигур"];
      12 [label="Сложение и вычитание дробей\nс одинаковыми знаменателями"];
      13 [label="Площадь прямоугольника и квадрата"];
      14 [label="Чтение и запись многозначных чисел"];
      15 [label="Натуральные числа и ноль"];
      16 [label="Отрицательные числа"];
      17 [label="Десятичные дроби"];
      18 [label="Простейшие уравнения"];
      19 [label="Отношения и пропорции"];
      20 [label="Проценты"];
      21 [label="Площади многоугольников"];
      22 [label="Алгебраические выражения\nс переменными"];
      23 [label="Линейные уравнения\nс одной переменной"];
      24 [label="Системы линейных уравнений"];
      25 [label="Функции и их графики"];
      26 [label="Геометрия прямоугольного треугольника"];
      27 [label="Теорема Пифагора"];
      28 [label="Квадратные уравнения"];
      29 [label="Иррациональные числа"];
      30 [label="Геометрические преобразования"];
      31 [label="Объемы геометрических тел"];
      32 [label="Тригонометрические функции"];
      33 [label="Статистика и теория вероятностей"];
      34 [label="Координатная плоскость\nи графики функций"];
      35 [label="Рациональные выражения\nи их преобразования"];

      // Определение связей
      1 -> 2;
      1 -> 4;
      4 -> 5;
      5 -> 6;
      6 -> 8;
      8 -> 9;
      9 -> 10;
      3 -> 11;
      10 -> 12;
      11 -> 13;
      4 -> 14;
      15 -> 16;
      10 -> 17;
      2 -> 18;
      5 -> 18;
      6 -> 18;
      9 -> 19;
      10 -> 19;
      19 -> 20;
      13 -> 21;
      18 -> 22;
      22 -> 23;
      23 -> 24;
      22 -> 25;
      3 -> 26;
      11 -> 26;
      26 -> 27;
      23 -> 28;
      28 -> 29;
      3 -> 30;
      11 -> 30;
      21 -> 31;
      27 -> 32;
      20 -> 33;
      10 -> 33;
      25 -> 34;
      22 -> 35;
    }
    `;

            // Рендеринг графа
            var viz = new Viz();

            viz.renderSVGElement(dot)
                .then(function (element) {
                    document.getElementById("graph").appendChild(element);
                })
                .catch((error) => {
                    // Обработка ошибок
                    console.error(error);
                });
        </script>
    </body>
</html>
